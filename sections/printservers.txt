At the core of every lab should be some sort of utility server. This server should handle a variety of functions to serve the client machines in the lab. In CECS labs, the most obvious function for these servers was printing, so we decided to call them print servers and name them psvr<lab room number>. Printing is described in the lab printing section. The rest of the printserver's functionality consists of: DHCP, TFTP, PXE boot, NFS, Samba, Norton Ghost (for windows), and to function as NIS slaves.

--DHCPD Server
The DHCPD server functions to hand out IP addresses to the client machines in the lab. The DHCPD has to be on the same subnet as the clients due to how DHCP addresses work. Clients send a broadcast on the local subnet to request an IP, and DHCPD responds. It is possible for this broadcast to escape the subnet, but that requires the router (or layer 3 switch) to use an IP helper protocol. This protocol maps broadcast requests to their origin subnets so that answers can be returned. In CECS labs, we prefer to keep DHCPD on the same subnet in the event that if connection outside the lab is lost, clients can still function locally. 

In addition, the DHCPD server must hand out addresses based on Mac addresses. This is because IP addresses are mapped to hostnames in DNS. Hostnames should match the labels listed on the client machines. This way, if a problem with a client machine is reported, Tech Support knows both where the machine is physically and how to reach it over a network. IP addresses should not be handed out randomly for normal operations (though it could be done for cloning if static addresses are assigned later). 

Alternatively, static addresses can be assigned on a per machine basis during the cloning process. The advantage to this is the clients will be on the network regardless what happens to the DCHPD server. The disadvantage to this is the cloning process will require someone to manually enter an IP for each client at some point, and this will break the ability to do fully automatic lab installs.  Regardless how IP addresses are handled during normal operations, dhcpd must be turned on during cloning to support TFTP and PXE for network booting. 

--Netboot
One of the most important uses of the print server is cloning the labs. Full details of that are listed in the cloning section, but the print server side is described here. The core part of the cloning requires the ability for clients to network boot (netboot) from the print server. 

Netbooting requires 4 things: DHCP (listed above), TFTP, PXE, and NFS. DHCP is required because the machines do not know who is who and require an IP address to get started. After they've successfully netbooted, the IP address they have can be changed to the one they actually need or be mapped automatically with dhclient if the print server knows their MAC address. 

TFTP (Trivial File Transfer Protocol) is required for loading the initial boot image. TFTP has very little security and must be highly restricted on the print server. It has no authentication and only allows downloading of specific files. This is necessary because during netboot, clients do not have any sort of identification or credentials that they can use. TFTP is only for used for the loading of the boot image. The lab image to clone with is transfered with NFS.

DHCP and TFTP are used to support PXE (Pre-boot Execution Environment). This is the protocol used to support netbooting without the help of any storage device on the client. 
NFS


Print servers are important for authentication because
